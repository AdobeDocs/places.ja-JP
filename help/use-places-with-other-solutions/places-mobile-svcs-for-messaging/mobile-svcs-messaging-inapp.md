---
title: アプリ内メッセージ
seo-title: アプリ内メッセージ
description: ここでは、アプリ内メッセージで場所を使用する方法について説明します。
seo-description: ここでは、アプリ内メッセージで場所を使用する方法について説明します。
translation-type: tm+mt
source-git-commit: 7985943cef606525401983c4c80862c277f41bf0

---


# アプリ内通知(#places-push-messaging)

Placesイベントからトリガーするアプリ内メッセージの設定方法メッセージは、Analyticsヒットに存在する必要があります。

## アプリ内メッセージ

AMSを使用すると、Analyticsに送信される場所データを、アプリ内メッセージのトリガーイベントや条件として使用できます。 アプリ内メッセージは、SDKからトリガーが実行された場合に、直ちにリアルタイムでユーザーに表示され、Analyticsでデータが処理されるのを待つ必要はありません。

ローカル通知：アプリ内メッセージには3つの異なるタイプがあります。

* フルスクリーン
* アラート
* ローカル通知を参照してください。

これらのタイプはSDKによってトリガーされるので、アプリ内メッセージと見なされますが、アプリがフォアグラウンドにない間は、ローカル通知が表示され、プッシュ通知のように見え、感じることに注意する必要があります。 ローカル通知は、アプリがバックグラウンドにある間にPOIに入るかPOIから出るときに、リアルタイム通知をユーザーに配信する優れたオプションです。 場所の監視について詳しくは、場所モニター拡張機能のドキュメント(https://placesdocs.com/places-services-by-adobe-documentation/configure-places-in-the-sdk/places-monitor-extension)を参照してください。

### 前提条件

* AMSでのアプリ内メッセージの送信方法と作成方法、およびTriggersの動作を理解します。

   詳しくは、[アプリ内メッセージの作成](https://docs.adobe.com/content/help/en/mobile-services/using/messaging-ug/inapp-messages/t-in-app-message.html)を参照してください。


## エクスペリエンスプラットフォームの起動でのルールの作成

アプリ内メッセージのトリガールールの一部として使用できる正しいデータをAnalyticsに送信する起動ルールを作成します。 起動ルール内の場所拡張のデータは、使用事例に応じて、イベントや条件として使用できます。

* トリガーイベントとしての場所データの使用。 例えば、ユーザーがPOIに入ったときにAnalyticsにデータを送信する場合を考えてみます。

* トリガーイベントに対する条件として位置データを使用する。 例えば、異なるPOIの天気に合わせてロケーションサービスにカスタムメタデータタグを作成した場合、そのメタデータを以下に示すようにルール条件のパラメーターとして使用できます。 この条件は、前述のPOIエントリイベントに使用できますが、任意のイベントのコンテキストとして使用することもできます。

適切なイベントおよび条件パラメーターを使用してルールを設定したら、Analyticsにデータを送信するアクションを設定して、ルールの設定を完了します。 次に手順を示します。

* 拡張機能としてAdobe Analyticsを選択
* アクションのタイプとして「追跡」を選択します
* アクションの名前を指定します
* イベントと共に送信するコンテキストデータを設定します。 コンテキストデータインターフェイスを使用して、起動データ要素をAnalyticsに送信するキー名にマップします。

Analytics処理ルールは、このコンテキストデータを取得するように設定できます。 必要に応じて、Analyticsの処理ルールを参照してください(https://docs.adobe.com/content/help/en/analytics/implementation/analytics-basics/ref-processing-rules.html)。例えば、Analyticsに送信されるPOIエントリイベントを説明するために、このアクションはコンテキストとしてポイントを送信します。

![アクションの作成](/help/assets/configure-action.png)

完成したルールの例を次に示します。

![完了規則](/help/assets/create-a-rule.png)

## AMSでのアプリ内メッセージの作成：

Location ServiceのデータをTriggerパラメーターの一部として含む、メッセージのオーディエンスを作成します。

* 入口または出口などの場所固有のアクションの使用
* コンテキストデータとして送信されるPOIメタデータを使用して、オーディエンスのターゲットを絞り込みます。 これは、エントリなどの場所固有のアクションで使用したり、起動やボタンクリックなどの別のイベントへのコンテキストとして使用したりできます。

   名前に「Adobe」を含むPOIを入力するユーザーを迎え入れるアプリ内メッセージの設定例を次に示します。

   ![トリガパラメータ](/help/assets/trigger-parameters.png)

* AMS TriggersとTraitsの「Places」見出しにあるパラメーターは、Location Serviceのデータでは機能しません。 これらのパラメータは、AMSで作成された従来の場所データベース用です。