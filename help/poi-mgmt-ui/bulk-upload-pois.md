---
title: POIの一括アップロード
seo-title: POIの一括アップロード
description: ここでは、POIをバルクアップロードする方法について説明します。
seo-description: ここでは、POIをバルクアップロードする方法について説明します。
translation-type: tm+mt
source-git-commit: a76e91775efd92ce56f2dc5cbdcc65786855b5c3

---


# POIのバルクアップロード {#bulk-upload-pois}

Web Service APIを使用して.csvファイルからPOIデータベースへのPOIのバッチインポートを簡単にするPythonスクリプトのセットが作成されました。 これらのスクリプトは、このオープンソース [gitレポートからダウンロードできま](https://github.com/adobe/places-scripts)す。

これらのスクリプトを実行する前に、WebサービスAPIにアクセスする場合は、統合の概要と前提 *条件の「ユーザーアクセスの前提条件* 」 [を参照してください](/help/web-service-api/adobe-i-o-integration.md)。

スクリプトに関する情報を次に示します。

>[!TIP]
>
>この情報は、 [gitリポジトリのお読みくださいファイルにも含まれています](https://github.com/adobe/places-scripts)。

## CSVファイル

サンプルの.csvファイル() `places_sample.csv`は、このパッケージの一部で、必要なヘッダーとサンプルデータの行が含まれています。 これらのヘッダーはすべて小文字で、Placesデータベースで使用される予約済みのメタデータキーに対応しています。 .csvファイルに追加した列は、POIごとにキー/値のペアとして別々のメタデータセクションにPOIデータベースに追加され、ヘッダー値がキーとして使用されます。

使用する必要がある列と値のリストを次に示します。

* `lib_id`

   POIデータベースから取得した有効なライブラリID。

* `type`

   現在、有効な値はPointのみです。

* `longitude`

   -180 ～ 180の値です。

* `latitude`

   -85 ～ 85の値です。

* `radius`

   10 ～ 2000の値です。

### 列の値

次の列の値は、Location Service UIで使用されます。

* 色。ロケーションサービスのUIマップでPOIの場所を表すピンの色として使用されます。
   * 有効な値は、「」、「#3E76D0」、「#AA99E8」、「#DC2ABA」、「#FC685B」、「#FC962E」、「#F6C436」、「#BECE5D」、「#61B56B」です。b、#3DC8DE、および""
   * この値を空白のままにすると、Location Service UIのデフォルトの色は青になります。

      値は、青(#3E76D0)、紫(#AA99E8)、フスキア(#DC2ABA)、オレンジ(#FC685B)、淡いオレンジ(#FC962E)、黄(#F6C436)、明(#BECE5D)、緑(#61B56B)、薄い青(#3DC8DE)のそれぞれに対応しています。

* アイコン。ロケーションサービスのUIマップ上のPOIの場所を表すピン上のアイコンとして使用されます。

   * 有効値は、「」、ショップ、ホテルベッド、車、飛行機、電車、船、スタジアム、アムゼントパーク、アンカー、ベル、ベル、入札、書き物、ブラウズ、ブラシ、ビル、カメラ、時計、教育、懐中電灯、ゲーム、女性、男性、ハンマー、ハート、ホーム、打ち上げ、電球、郵便受け、金、ピン、買い物かごstar、target、teapot、thumbDown、thumbUp、trap、trophy、rench。

      アイコンの値は、次の図に示す順序で表示されます。

      ![アイコン、UI内](/help/assets/UI_icons.png)

   * 値を空白のままにすると、UIはデフォルトのアイコンとして星を使用します。

* 言及されていない列は空白にできます。

## スクリプトの実行

1. gitリポジトリからローカル [ディレクトリに](https://github.com/adobe/places-scripts) 、ファイルをダウンロードします。
1. テキストエディターでファイルを開 `config.py` き、次のタスクを実行します。

   a.次の変数値を文字列として編集します。

   * `csv_file_path`

      これはファイルへのパス `.csv` です。

   * `access_code`

      これは、Adobe IMSへの呼び出しから取得したアクセスコードです。 このアクセスコードの取得方法について詳しくは、統合の概要と前提条件で *「ユーザーアクセスの前提条件* 」 [を参照してください](/help/web-service-api/adobe-i-o-integration.md)。

   * `org_id`

      POIの読み込み先のExperience cloud組織ID。 組織IDの取得方法について詳しくは、統合の概要と前提条件で *「ユーザーアクセスの前提条件* 」 [を参照してください](/help/web-service-api/adobe-i-o-integration.md)。

   * `api_key`

      これは、Adobe I/O Places統合から取得したPlaces REST APIキーです。 APIキーの取得方法について詳しくは、統合の概要と前提条件で *「ユーザーアクセスの前提条件* 」 [を参照してください](/help/web-service-api/adobe-i-o-integration.md)。
   b.変更を保存します。

1. ターミナルウィンドウで、ディレクトリに移動 `…/places-scripts/import/` します。
1. と入力 `python ./places_import.py` し、 ( **[!UICONTROL enter]****[!UICONTROL return]**)キーを押します。


## インポート前のCSVチェック

スクリプトは、最初に.csvファイルに対して次のチェックを完了します。

* ファイルが指定さ `.csv` れたかどうか。
* ファイルパスが有効かどうか。
* 予約済みのメタデータヘッダを含めるかどうか。

   予約済みのメタデータヘッダーは、lib_id、名前、説明、タイプ、経度、緯度、半径、国、都道府県、市区町村、街路、カテゴリ、アイコン、色です。

   >[!TIP]
   >
   >ヘッダーはすべて小文字で、任意の順序で表示できます。

* CSVファイルセクションで指定された列の値を検証します。

エラーが見つかった場合、スクリプトはエラーを出力し、中止します。 エラーが見つからない場合、スクリプトはPOIを1000バッチで読み込もうとします。 バッチが正常に読み込まれると、スクリプトはステータスコード200をレポートします。 バッチが正常に読み込まれなかった場合は、エラーが報告されます。

## 単体テスト

単体テストはファイル内にあ `tests.py` り、各プル要求の前に実行し、すべてが合格する必要があります。 新しいコードを使用して、テストを追加する必要があります。 テストを実行するには、ディレクトリ `…/places-scripts/import/` に移動し、ターミナルに `python ./places_import.py` 入力します。
